(this.webpackJsonpspotifood=this.webpackJsonpspotifood||[]).push([[0],{95:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"listPlaylists",(function(){return O})),n.d(a,"searchPlaylists",(function(){return x})),n.d(a,"filterPlaylists",(function(){return y}));var r=n(1),i=n(0),o=n.n(i),s=n(22),c=n.n(s),l=n(15),u=n(16),d=n(18),p=n(17),h=n(63),j=n(8),b=n(23),f=n(101),m=n(13);function O(t){return{type:"LIST_PLAYLISTS",playlists:t}}function x(t){return{type:"SEARCH_PLAYLISTS",playlists:t}}function y(t){return{type:"FILTER_PLAYLISTS",playlists:t}}var v=n.p+"static/media/logo.7000afed.png",g=n(30),w=n.n(g),S=w.a.create({baseURL:"https://api.spotify.com/v1/",headers:{Authorization:"".concat(localStorage.getItem("@SpotiFood:type")," ").concat(localStorage.getItem("@SpotiFood:token"))}}),k=n(29),F=n.n(k),C=n(40),I=n(60),A=n(99),L=n(100),P=n(98),N=n(56),T=n.n(N),_="rgb(236, 236, 236)",D="rgb(0, 225, 85)",M=function(t){for(var e in t)null!==t[e]&&void 0!==t[e]||delete t[e];return t},z=n(6),R=n(7),Y=n(97);function E(){var t=Object(z.a)(["\n  background-color: ",";\n  border: 0;\n  font-weight: 500;\n"]);return E=function(){return t},t}function H(){var t=Object(z.a)(["\n  padding: 20px;\n  background-color: ",";\n  margin-bottom: 20px;\n"]);return H=function(){return t},t}function W(){var t=Object(z.a)(["\n  color: ",";\n  font-weight: bold;\n  font-size: 20px;\n"]);return W=function(){return t},t}function G(){var t=Object(z.a)(["\n  margin: 0px;\n  padding: 0px;\n"]);return G=function(){return t},t}function U(){var t=Object(z.a)(["\n  @media only screen and (max-width: 767px) {\n    .input-group {\n      width: 70% !important;\n    }\n  }\n"]);return U=function(){return t},t}var B=R.b.div(U()),J=Object(R.b)(Y.a)(G()),X=R.b.p(W(),_),K=R.b.form(H(),"#333"),V=Object(R.b)(P.a)(E(),D),q=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={search:"",datePicker:"",localeFilters:[],countryFilters:[],openFilterOptions:!1,filterApplied:!1},t.handleApplyFilter=function(e){e.preventDefault();var n=t.state.datePicker,a=t.props.callbackFromParent,r="empty"===t.country.value?null:t.country.value,i="empty"===t.locale.value?null:t.locale.value,o=""===n?null:n,s=""===t.limit.value?null:t.limit.value,c=""===t.offset.value?null:t.offset.value,l=M({country:r,locale:i,timestamp:o,limit:s,offset:c});return S.get("browse/featured-playlists",{params:l}).then((function(e){t.props.listPlaylists(e.data.playlists.items)})).catch((function(t){401===t.response.status&&setInterval((function(){window.location.replace("http://localhost:3000")}),3e3)})),t.setState({openFilterOptions:!1,filterApplied:!0}),a({filterApplied:!0})},t.resetFilters=function(e){e.preventDefault();var n=t.props.callbackFromParent;return S.get("browse/featured-playlists").then((function(e){t.props.listPlaylists(e.data.playlists.items)})).catch((function(t){401===t.response.status&&setInterval((function(){window.location.replace("http://localhost:3000")}),3e3)})),t.setState({filterApplied:!1}),n({filterApplied:!1})},t.closeModal=function(){t.setState({filterApplied:!1})},t.handleNewSearch=function(){var e=Object(C.a)(F.a.mark((function e(n){var a,r,i,o,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13===n.keyCode){e.next=2;break}return e.abrupt("return");case 2:return a=t.props.callbackFromParent,e.next=5,S.get("browse/featured-playlists");case 5:if(401!==(r=e.sent).status){e.next=10;break}setInterval((function(){window.location.replace("http://localhost:3000")}),3e3),e.next=16;break;case 10:return i=r.data.playlists.items,o=t.state.search,s=i.filter((function(t){return t.name.toLowerCase().includes(o)?t:null})),t.props.searchPlaylists(s),t.setState({openFilterOptions:!1,filterApplied:!0,search:""}),e.abrupt("return",a({filterApplied:!0}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleSearchChange=function(e){t.setState({search:e.target.value})},t.handleDatePickerChange=function(e){t.setState({datePicker:T()(e.target.value,"YYYY-MM-DD HH:mm").format()})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=Object(C.a)(F.a.mark((function t(){var e;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("https://www.mocky.io/v2/5a25fade2e0000213aa90776");case 2:e=t.sent,this.setState({localeFilters:e.data.filters[0].values,countryFilters:e.data.filters[1].values});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state,n=e.search,a=e.openFilterOptions,i=e.localeFilters,o=e.countryFilters,s=e.filterApplied;return Object(r.jsxs)(B,{className:"col-12",children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-md-6 mb-3",children:Object(r.jsx)(J,{children:Object(r.jsx)(I.a,{placeholder:"Search a playlist ... (Press Enter to Search)","aria-label":"Search",value:n,onChange:this.handleSearchChange,onKeyDown:this.handleNewSearch})})}),Object(r.jsx)("div",{className:"col-md-6 mb-3",children:Object(r.jsx)(V,{onClick:function(){return t.setState({openFilterOptions:!a})},"aria-controls":"collapse-filter-options","aria-expanded":a,children:"Filter Options"})})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-12",children:Object(r.jsx)(A.a,{in:a,children:Object(r.jsxs)("div",{className:"collapse-filter-options",children:[Object(r.jsx)(X,{children:"Filters Options"}),Object(r.jsx)("div",{children:Object(r.jsxs)(K,{onSubmit:this.handleApplyFilter,className:"col-12",children:[Object(r.jsxs)(L.a.Row,{children:[Object(r.jsxs)(L.a.Group,{controlId:"locale",style:{marginRight:20},children:[Object(r.jsx)(L.a.Label,{style:{color:_,fontWeight:"bold"},children:"Locale"}),Object(r.jsxs)(I.a,{as:"select",name:"locale",ref:function(e){return t.locale=e},children:[Object(r.jsx)("option",{value:"empty",children:"Choose..."}),i.map((function(t){return Object(r.jsx)("option",{value:t.value,children:t.name},t.value)}))]})]}),Object(r.jsxs)(L.a.Group,{controlId:"country",children:[Object(r.jsx)(L.a.Label,{style:{color:_,fontWeight:"bold"},children:"Country"}),Object(r.jsxs)(I.a,{as:"select",name:"country",ref:function(e){return t.country=e},children:[Object(r.jsx)("option",{value:"empty",children:"Choose..."}),o.map((function(t){return Object(r.jsx)("option",{value:t.value,children:t.name},t.value)}))]})]})]}),Object(r.jsx)(L.a.Row,{children:Object(r.jsxs)(L.a.Group,{controlId:"timestamp",children:[Object(r.jsx)(L.a.Label,{style:{color:_,fontWeight:"bold"},children:"Timestamp"}),Object(r.jsx)(I.a,{as:"input",placeholder:"2014-10-23T07:00:00",type:"datetime-local",name:"timestamp",ref:function(e){return t.timestamp=e},onChange:this.handleDatePickerChange})]})}),Object(r.jsxs)(L.a.Row,{children:[Object(r.jsxs)(L.a.Group,{controlId:"limit",style:{marginRight:20},children:[Object(r.jsx)(L.a.Label,{style:{color:_,fontWeight:"bold"},children:"Limit"}),Object(r.jsx)(I.a,{as:"input",name:"limit",type:"number",placeholder:"5",min:"1",max:"50",ref:function(e){return t.limit=e}})]}),Object(r.jsxs)(L.a.Group,{controlId:"offset",children:[Object(r.jsx)(L.a.Label,{style:{color:_,fontWeight:"bold"},children:"Offset"}),Object(r.jsx)(I.a,{as:"input",name:"offset",type:"number",placeholder:"5",min:"1",max:"50",ref:function(e){return t.offset=e}})]})]}),Object(r.jsx)(P.a,{variant:"primary",type:"submit",children:"Apply"})]})})]})})}),Object(r.jsx)("div",{className:"col-12",children:Object(r.jsxs)(f.a,{dismissible:!0,show:s,onClose:this.closeModal,variant:"success",style:{justifyContent:"center"},children:[Object(r.jsx)(f.a.Heading,{children:"Filters applied!"}),Object(r.jsx)("hr",{}),Object(r.jsx)("div",{className:"d-flex justify-content-start",children:Object(r.jsx)(P.a,{onClick:this.resetFilters,variant:"outline-success",children:"Remove Filters"})})]})})]})]})}}]),n}(i.Component),Q=Object(b.b)((function(t){return{playlists:t.playlists}}),(function(t){return Object(m.a)(a,t)}))(q);function Z(){var t=Object(z.a)(["\n  color: ",";\n  font-weight: bold;\n  font-size: 12px;\n\n  span {\n    color: ",";\n  }\n"]);return Z=function(){return t},t}function $(){var t=Object(z.a)(["\n  color: ",";\n  font-weight: bold;\n  font-size: 36px;\n  margin: 0px;\n"]);return $=function(){return t},t}function tt(){var t=Object(z.a)(["\n  margin-top: 8px;\n  font-size: 12px;\n  color: ",";\n  margin-bottom: 0px;\n"]);return tt=function(){return t},t}function et(){var t=Object(z.a)(["\n  .info-playlist {\n    margin-left: 10px;\n  }\n\n  @media only screen and (min-width: 992px) {\n    .col-md-2 {\n      max-width: 12% !important;\n    }\n  }\n\n  @media only screen and (max-width: 767px) {\n    .name-info-playlist {\n      font-size: 24px;\n    }\n  }\n"]);return et=function(){return t},t}var nt=R.b.li(et()),at=R.b.p(tt(),_),rt=R.b.p($(),_),it=R.b.p(Z(),"rgb(179, 179, 179)",_),ot=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.playlist;return Object(r.jsxs)(nt,{className:"row featurette",children:[Object(r.jsx)("div",{className:"col-md-2",children:Object(r.jsxs)("a",{className:"url-info-playlist",href:t.external_urls.spotify,target:"blank",children:[Object(r.jsx)("img",{height:100,src:t.images[0].url,alt:"SpotiFood"})," "]})}),Object(r.jsxs)("div",{className:"col-md-10",children:[Object(r.jsx)(at,{children:"PLAYLIST"}),Object(r.jsx)(rt,{children:t.name}),Object(r.jsxs)(it,{children:["Created by ",Object(r.jsx)("span",{children:t.owner.display_name})," -"," ",t.tracks.total," songs"]})]})]})}}]),n}(i.Component);function st(){var t=Object(z.a)(["\n  padding: 20px;\n  text-align: center;\n\n  h2 {\n    color: ",";\n    font-weight: bold;\n  }\n\n  p {\n    color: ",";\n    font-weight: 300;\n  }\n"]);return st=function(){return t},t}var ct=R.b.div(st(),_,_),lt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.playlists[0];return void 0!==t?t.length>0?Object(r.jsx)(r.Fragment,{children:t.map((function(t){return Object(r.jsx)(ot,{playlist:t},t.id)}))}):Object(r.jsxs)(ct,{children:[Object(r.jsx)("h2",{children:"No results found!"}),Object(r.jsx)("p",{children:"Please make sure your words are spelled correctly or use less of different keywords."})]}):Object(r.jsx)("div",{className:"text-center",children:Object(r.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading..."})})})}}]),n}(i.Component),ut=Object(b.b)((function(t){return{playlists:t.playlists}}),(function(t){return Object(m.a)(a,t)}))(lt);function dt(){var t=Object(z.a)(["\n  margin-left: 5px;\n  margin-top: 5px;\n"]);return dt=function(){return t},t}function pt(){var t=Object(z.a)(["\n  color: ",";\n  font-weight: bold;\n"]);return pt=function(){return t},t}function ht(){var t=Object(z.a)(["\n  justify-content: flex-start;\n  display: flex;\n  margin-top: 25px;\n  margin-bottom: 10px;\n  padding: 5px;\n"]);return ht=function(){return t},t}var jt=R.b.div(ht()),bt=R.b.h1(pt(),_),ft=R.b.img(dt()),mt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={playlists:[],expiredToken:!1,hasAuthorization:!1,filterApplied:!1},t.hasAuthorization=function(){return null!==localStorage.getItem("@SpotiFood:token")},t.syncMethod=function(){var e=t.state,n=e.playlists,a=e.filterApplied;S.get("browse/featured-playlists").then((function(e){a||t.props.listPlaylists(e.data.playlists.items),t.setState({playlists:n})})).catch((function(e){401===e.response.status&&(t.setState({expiredToken:!0}),setInterval((function(){t.setState({expiredToken:!1}),window.location.replace("http://localhost:3000")}),3e3))}))},t.myCallFromParent=function(e){t.setState({filterApplied:e.filterApplied})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.hasAuthorization()?(this.setState({hasAuthorization:!0}),S.get("browse/featured-playlists").then((function(e){t.props.listPlaylists(e.data.playlists.items),t.setState({playlists:t.props.playlists})})).catch((function(e){401===e.response.status&&(t.setState({expiredToken:!0}),setInterval((function(){t.setState({expiredToken:!1}),window.location.replace("http://localhost:3000")}),3e3))}))):(this.setState({hasAuthorization:!1}),setInterval((function(){window.location.replace("http://localhost:3000")}),3e3))}},{key:"componentWillMount",value:function(){var t=this;setInterval((function(){t.syncMethod()}),3e4)}},{key:"render",value:function(){var t=this.state,e=t.expiredToken,n=t.hasAuthorization,a=t.playlists;return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsxs)(jt,{children:[Object(r.jsx)(bt,{children:"SpotiFood"}),Object(r.jsx)(ft,{height:36,src:v,alt:"SpotiFood"})]}),Object(r.jsx)("div",{className:"row",children:n?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Q,{callbackFromParent:this.myCallFromParent}),Object(r.jsx)("div",{className:"col-12",children:e?Object(r.jsxs)(f.a,{dismissible:!0,show:e,onClose:function(){return null},variant:"danger",style:{justifyContent:"center"},children:[Object(r.jsx)(f.a.Heading,{children:"Your token has been expired!"}),Object(r.jsx)("hr",{})]}):Object(r.jsx)(ut,{playlists:a.playlists})})]}):Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(f.a,{dismissible:!0,show:!n,onClose:function(){return null},variant:"danger",style:{justifyContent:"center"},children:[Object(r.jsx)(f.a.Heading,{children:"Sorry, you don't have access!"}),Object(r.jsx)("hr",{})]})})})]})}}]),n}(i.Component),Ot=Object(b.b)((function(t){return{playlists:t.playlists,filteredPlaylists:t.filteredPlaylists}}),(function(t){return Object(m.a)(a,t)}))(mt),xt=function(){for(var t,e={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);t=n.exec(a);)e[t[1]]=decodeURIComponent(t[2]);return e};function yt(){var t=Object(z.a)(["\n  background-color: ",";\n  border: 0;\n  font-weight: 500;\n  text-align: center;\n"]);return yt=function(){return t},t}function vt(){var t=Object(z.a)(["\n  color: ",";\n  font-weight: bold;\n"]);return vt=function(){return t},t}function gt(){var t=Object(z.a)(["\n  width: 100%;\n  max-width: 420px;\n  padding: 15px;\n  margin: 0 auto;\n"]);return gt=function(){return t},t}var wt=R.b.form(gt()),St=R.b.h1(vt(),_),kt=Object(R.b)(P.a)(yt(),D),Ft=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={loading:!1},t.handleSignIn=function(t){t.preventDefault(),window.open("https://accounts.spotify.com/authorize?client_id=".concat("406e3737b1ef42b58a8a6dc018014923","&response_type=token&redirect_uri=").concat("http://localhost:3000","&scope=user-read-private%20user-read-email&state=34fFs29kd09"),"_self")},t.handleLogin=function(e,n,a){t.setState({loading:!0}),localStorage.setItem("@SpotiFood:token",e),localStorage.setItem("@SpotiFood:type",n),localStorage.setItem("@SpotiFood:expires_in",a),window.history.pushState({urlPath:"/home"},"","/home"),t.setState({loading:!1}),window.location.reload()},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=xt(),e=t.access_token,n=t.token_type,a=t.expires_in;void 0!==e&&this.handleLogin(e,n,a)}},{key:"render",value:function(){var t=this.state.loading;return Object(r.jsxs)(wt,{children:[Object(r.jsxs)("div",{className:"text-center mb-4",children:[Object(r.jsx)("img",{className:"mb-4",src:v,alt:"",width:"72",height:"72"}),Object(r.jsx)(St,{children:"SpotiFood"})]}),Object(r.jsx)("div",{className:"row justify-content-center",children:t?Object(r.jsx)("div",{className:"text-center",children:Object(r.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(r.jsx)(kt,{onClick:this.handleSignIn,children:"Log In with Spotify"})})]})}}]),n}(i.Component),Ct={playlists:[]};var It=Object(m.b)({playlists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LIST_PLAYLISTS":case"SEARCH_PLAYLISTS":case"FILTER_PLAYLISTS":return[e.playlists];default:return t}}}),At=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.c,Lt=Object(m.d)(It,At());function Pt(){var t=Object(z.a)(["\n  body {\n    margin: 0;\n    padding: 0;\n    background-color: ",";\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n      monospace;\n  }\n"]);return Pt=function(){return t},t}var Nt=Object(R.a)(Pt(),"#222222"),Tt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsxs)(b.a,{store:Lt,children:[Object(r.jsx)(Nt,{}),Object(r.jsx)(h.a,{children:Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{path:"/",exact:!0,component:Ft}),Object(r.jsx)(j.a,{path:"/home",component:Ot})]})})]})}}]),n}(i.Component),_t=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,102)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),i(t),o(t)}))};n(93),n(94);c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(Tt,{})}),document.getElementById("root")),_t()}},[[95,1,2]]]);
//# sourceMappingURL=main.a59bdfbb.chunk.js.map